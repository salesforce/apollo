name: Java CI

on: [push]

env:
  MAVEN_OPTS: --enable-preview

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: 'Set up latest Oracle JDK 19'
        uses: oracle-actions/setup-java@v1
        with:
          website: oracle.com
          release: 19
      - name: Restore Maven cache
        uses: skjolber/maven-cache-github-action@v1
        with:
          step: restore
      - name: Build with Maven
        run: mvn -batch-mode  --update-snapshots clean package -Ppre --file pom.xml
      - name: Save Maven cache
        uses: skjolber/maven-cache-github-action@v1
        with:
          step: save
